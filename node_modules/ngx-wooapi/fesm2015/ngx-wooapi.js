import { Injectable } from '@angular/core';
import { Observable } from 'rxjs';
import { HttpClient } from '@angular/common/http';
import { catchError, map } from 'rxjs/operators';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class WoocommerceHelperService {
    constructor() { }
    /**
     * @param {?} error
     * @return {?}
     */
    handleError(error) {
        if (error.error instanceof ErrorEvent) {
            // A client-side or network error occurred. Handle it accordingly.
            console.error('An error occurred:', error.error);
        }
        else {
            // The backend returned an unsuccessful response code.
            // The response body may contain clues as to what went wrong,
            console.log('Backend response', error);
            return Observable.throw(error.error);
        }
        // return an observable with a user-facing error message
        return Observable.throw({ message: 'Something bad happened; please try again later.' });
    }
    /**
     * @param {?=} query
     * @return {?}
     */
    includeQuery(query = {}) {
        const /** @type {?} */ queryPatch = {};
        Object.keys(query).forEach(key => {
            queryPatch[key] = query[key].toString();
        });
        return queryPatch;
    }
    /**
     * @param {?=} query
     * @return {?}
     */
    includeEncoded(query = {}) {
        const /** @type {?} */ params = new FormData();
        Object.keys(query).forEach((key) => {
            params.append(key, query[key]);
        });
        console.log(params);
        return params;
    }
    /**
     * @param {?} response
     * @param {?=} responseBodyKey
     * @return {?}
     */
    includeResponseHeader(response, responseBodyKey) {
        const /** @type {?} */ headers = {};
        response.headers.keys().forEach(key => {
            headers[key] = response.headers.get(key);
        });
        let /** @type {?} */ responseData = {};
        if (responseBodyKey) {
            responseData[responseBodyKey] = response.body;
        }
        else {
            responseData = response.body;
        }
        responseData['headers'] = headers;
        return responseData;
    }
}
WoocommerceHelperService.decorators = [
    { type: Injectable },
];
/** @nocollapse */
WoocommerceHelperService.ctorParameters = () => [];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
/** @enum {string} */
const ProductOrder = {
    "desc": 'desc',
    "asc": 'asc',
};
/** @enum {string} */
const ProductOrderBy = {
    "date": 'date',
    "id": 'id',
    "include": 'include',
    "title": 'title',
    "slug": 'slug',
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class WoocommerceProductsService {
    /**
     * @param {?} httpClient
     * @param {?} wooHelper
     */
    constructor(httpClient, wooHelper) {
        this.httpClient = httpClient;
        this.wooHelper = wooHelper;
    }
    /**
     * Create a Product
     * @param {?} payload
     * @return {?}
     */
    createProduct(payload) {
        return this.httpClient.post(`products`, payload)
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
    /**
     * Retrieve a product
     * @param {?} id
     * @return {?}
     */
    retrieveProduct(id) {
        return this.httpClient.get(`products/${id}`)
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
    /**
     * Retrieve list of product
     * @param {?=} query
     * @return {?}
     */
    retrieveProducts(query) {
        return this.httpClient.get(`products`, { params: this.wooHelper.includeQuery(query), observe: 'response' })
            .pipe(map(value => this.wooHelper.includeResponseHeader(value, 'products')), catchError(err => this.wooHelper.handleError(err)));
    }
    /**
     * Update Product
     * @param {?} id
     * @param {?} payload
     * @return {?}
     */
    updateProduct(id, payload) {
        return this.httpClient.put(`products/${id}`, payload)
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
    /**
     * Update Product
     * @param {?} id
     * @return {?}
     */
    deleteProduct(id) {
        return this.httpClient.delete(`products/${id}`)
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
    /**
     * Retrieve product reviews by product id
     * @param {?} product_id
     * @return {?}
     */
    retrieveProductReviews(product_id) {
        return this.httpClient.get(`products/${product_id}/reviews`)
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
    /**
     * Retrieve product reviews by product id
     * @param {?} product_id
     * @param {?} review_id
     * @return {?}
     */
    retrieveProductReview(product_id, review_id) {
        return this.httpClient.get(`products/${product_id}/reviews/${review_id}`)
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
}
WoocommerceProductsService.decorators = [
    { type: Injectable },
];
/** @nocollapse */
WoocommerceProductsService.ctorParameters = () => [
    { type: HttpClient, },
    { type: WoocommerceHelperService, },
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
/** @enum {string} */
const TagOrder = {
    "desc": 'desc',
    "asc": 'asc',
};
/** @enum {string} */
const TagOrderBy = {
    "id": 'id',
    "include": 'include',
    "name": 'name',
    "slug": 'slug',
    "term_group": 'term_group',
    "description": 'description',
    "count": 'count',
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class WoocommerceTagsService {
    /**
     * @param {?} httpClient
     * @param {?} wooHelper
     */
    constructor(httpClient, wooHelper) {
        this.httpClient = httpClient;
        this.wooHelper = wooHelper;
    }
    /**
     * Create a Tag
     * @param {?} payload
     * @return {?}
     */
    createTag(payload) {
        return this.httpClient.post(`tags`, payload)
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
    /**
     * Retrieve a tag
     * @param {?} id
     * @return {?}
     */
    retrieveTag(id) {
        return this.httpClient.get(`tags/${id}`)
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
    /**
     * Retrieve list of Tag
     * @param {?=} query
     * @return {?}
     */
    retrieveTags(query) {
        return this.httpClient.get(`tags`, {
            params: this.wooHelper.includeQuery(query)
        })
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
    /**
     * Update Tag
     * @param {?} id
     * @param {?} payload
     * @return {?}
     */
    updateTag(id, payload) {
        return this.httpClient.put(`tags/${id}`, payload)
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
    /**
     * Delete Tag
     * @param {?} id
     * @return {?}
     */
    deleteagT(id) {
        return this.httpClient.delete(`tags/${id}`)
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
}
WoocommerceTagsService.decorators = [
    { type: Injectable },
];
/** @nocollapse */
WoocommerceTagsService.ctorParameters = () => [
    { type: HttpClient, },
    { type: WoocommerceHelperService, },
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
/** @enum {string} */
const CategoryOrder = {
    "desc": 'desc',
    "asc": 'asc',
};
/** @enum {string} */
const CategoryOrderBy = {
    "id": 'id',
    "include": 'include',
    "name": 'name',
    "slug": 'slug',
    "term_group": 'term_group',
    "description": 'description',
    "count": 'count',
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class WoocommerceCategoriesService {
    /**
     * @param {?} httpClient
     * @param {?} wooHelper
     */
    constructor(httpClient, wooHelper) {
        this.httpClient = httpClient;
        this.wooHelper = wooHelper;
    }
    /**
     * Create a Category
     * @param {?} category
     * @return {?}
     */
    createCategory(category) {
        return this.httpClient.post(`products/categories`, category)
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
    /**
     * Retrieve a Category
     * @param {?} id
     * @return {?}
     */
    retrieveCategory(id) {
        return this.httpClient.get(`products/categories/${id}`)
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
    /**
     * Retrieve list of Category
     * @param {?=} query
     * @return {?}
     */
    retrieveCategories(query) {
        return this.httpClient.get(`products/categories`, {
            params: this.wooHelper.includeQuery(query)
        })
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
    /**
     * Update Category
     * @param {?} id
     * @param {?} payload
     * @return {?}
     */
    updateCategory(id, payload) {
        return this.httpClient.put(`products/categories/${id}`, payload)
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
    /**
     * Delete Category
     * @param {?} id
     * @return {?}
     */
    deleteCategory(id) {
        return this.httpClient.delete(`products/categories/${id}`)
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
}
WoocommerceCategoriesService.decorators = [
    { type: Injectable },
];
/** @nocollapse */
WoocommerceCategoriesService.ctorParameters = () => [
    { type: HttpClient, },
    { type: WoocommerceHelperService, },
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
/** @enum {string} */
const NonceMethod = {
    register: 'register',
    get_avatar: 'get_avatar',
    get_userinfo: 'get_userinfo',
    retrieve_password: 'retrieve_password',
    validate_auth_cookie: 'validate_auth_cookie',
    generate_auth_cookie: 'generate_auth_cookie',
    get_currentuserinfo: 'get_currentuserinfo',
    get_user_meta: 'get_user_meta',
    update_user_meta: 'update_user_meta',
    delete_user_meta: 'delete_user_meta',
    xprofile: 'xprofile',
    xprofile_update: 'xprofile_update',
    fb_connect: 'fb_connect',
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class AuthService {
    /**
     * @param {?} httpClient
     * @param {?} wooHelper
     */
    constructor(httpClient, wooHelper) {
        this.httpClient = httpClient;
        this.wooHelper = wooHelper;
    }
    /**
     * @param {?} payload
     * @return {?}
     */
    createNonce(payload) {
        return this.httpClient.get(`api/get_nonce/`, { params: this.wooHelper.includeQuery(payload) })
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
    /**
     * @param {?} registerData
     * @return {?}
     */
    register(registerData) {
        const /** @type {?} */ payload = this.wooHelper.includeEncoded(registerData);
        return this.httpClient.post(`api/user/register/`, payload)
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
    /**
     * @param {?} username
     * @return {?}
     */
    retrivePassword(username) {
        const /** @type {?} */ payload = this.wooHelper.includeEncoded({ user_login: username });
        return this.httpClient.post(`api/user/retrieve_password/`, payload)
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
    /**
     * @param {?} payload
     * @return {?}
     */
    getAuthToken(payload) {
        return this.httpClient.post(`wp-json/jwt-auth/v1/token`, payload)
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
    /**
     * @param {?} data
     * @return {?}
     */
    generateAuthCookie(data) {
        return this.httpClient.post(`api/user/generate_auth_cookie/`, this.wooHelper.includeEncoded(data))
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
}
AuthService.decorators = [
    { type: Injectable },
];
/** @nocollapse */
AuthService.ctorParameters = () => [
    { type: HttpClient, },
    { type: WoocommerceHelperService, },
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class WoocommerceOrderService {
    /**
     * @param {?} httpClient
     * @param {?} wooHelper
     */
    constructor(httpClient, wooHelper) {
        this.httpClient = httpClient;
        this.wooHelper = wooHelper;
    }
    /**
     * @param {?} order
     * @return {?}
     */
    createOrder(order) {
        return this.httpClient.post(`orders`, order)
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
    /**
     * @param {?} id
     * @return {?}
     */
    retriveOrder(id) {
        return this.httpClient.get(`orders/${id}`)
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
    /**
     * @return {?}
     */
    listAllOrder() {
        return this.httpClient.get(`orders`)
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
    /**
     * @param {?} order
     * @return {?}
     */
    updateOrder(order) {
        return this.httpClient.put(`orders/${order.id}`, order)
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
    /**
     * @param {?} id
     * @return {?}
     */
    deleteOrder(id) {
        return this.httpClient.delete(`orders/${id}`)
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
}
WoocommerceOrderService.decorators = [
    { type: Injectable },
];
/** @nocollapse */
WoocommerceOrderService.ctorParameters = () => [
    { type: HttpClient, },
    { type: WoocommerceHelperService, },
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class WoocommerceCouponService {
    /**
     * @param {?} httpClient
     * @param {?} wooHelper
     */
    constructor(httpClient, wooHelper) {
        this.httpClient = httpClient;
        this.wooHelper = wooHelper;
    }
    /**
     * @param {?} coupon
     * @return {?}
     */
    createCoupon(coupon) {
        return this.httpClient.post(`coupons`, coupon)
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
    /**
     * @param {?} id
     * @return {?}
     */
    retriveCoupon(id) {
        return this.httpClient.get(`coupons/${id}`)
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
    /**
     * @return {?}
     */
    retriveCoupons() {
        return this.httpClient.get(`coupons`)
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
    /**
     * @param {?} coupon
     * @param {?} id
     * @return {?}
     */
    updateCoupon(coupon, id) {
        return this.httpClient.post(`coupons/${id}`, coupon)
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
    /**
     * @param {?} id
     * @return {?}
     */
    deleteCoupon(id) {
        return this.httpClient.delete(`coupons/${id}?force=true`)
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
}
WoocommerceCouponService.decorators = [
    { type: Injectable },
];
/** @nocollapse */
WoocommerceCouponService.ctorParameters = () => [
    { type: HttpClient, },
    { type: WoocommerceHelperService, },
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class WoocommerceCustomerService {
    /**
     * @param {?} httpClient
     * @param {?} wooHelper
     */
    constructor(httpClient, wooHelper) {
        this.httpClient = httpClient;
        this.wooHelper = wooHelper;
    }
    /**
     * Create a customer
     * @param {?} customer
     * @return {?}
     */
    createCustomers(customer) {
        return this.httpClient.post(`customers`, customer)
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
    /**
     * Retrive a customer
     * @param {?} id
     * @return {?}
     */
    retriveCustomers(id) {
        return this.httpClient.get(`customers/${id}`)
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
    /**
     * Update a customer
     * @param {?} id
     * @param {?} customer
     * @return {?}
     */
    updateCustomers(id, customer) {
        return this.httpClient.put(`customers/${id}`, customer)
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
}
WoocommerceCustomerService.decorators = [
    { type: Injectable },
];
/** @nocollapse */
WoocommerceCustomerService.ctorParameters = () => [
    { type: HttpClient, },
    { type: WoocommerceHelperService, },
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class WoocommerceOrderNoteService {
    /**
     * @param {?} httpClient
     * @param {?} wooHelper
     */
    constructor(httpClient, wooHelper) {
        this.httpClient = httpClient;
        this.wooHelper = wooHelper;
    }
    /**
     * Create a order note
     * URL: https://woocommerce.github.io/woocommerce-rest-api-docs/#create-an-order-note
     * @param {?} id
     * @param {?} note
     * @return {?}
     */
    createNote(id, note) {
        return this.httpClient.post(`orders/${id}/notes`, note)
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
    /**
     * Retrive a order note
     * URL: https://woocommerce.github.io/woocommerce-rest-api-docs/#retrieve-an-order-note
     * @param {?} id
     * @param {?} noteid
     * @return {?}
     */
    retriveNote(id, noteid) {
        return this.httpClient.get(`orders/${id}/notes/${noteid}`)
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
    /**
     * List all order notes
     * URL: https://woocommerce.github.io/woocommerce-rest-api-docs/#list-all-order-notes
     * @param {?} id
     * @return {?}
     */
    retriveNotes(id) {
        return this.httpClient.get(`orders/${id}/notes/`)
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
    /**
     * Delete a order note
     * URL: https://woocommerce.github.io/woocommerce-rest-api-docs/#delete-an-order-note
     * @param {?} id
     * @param {?} noteid
     * @return {?}
     */
    deleteNote(id, noteid) {
        return this.httpClient.delete(`orders/${id}/notes/${noteid}`)
            .pipe(catchError(err => this.wooHelper.handleError(err)));
    }
}
WoocommerceOrderNoteService.decorators = [
    { type: Injectable },
];
/** @nocollapse */
WoocommerceOrderNoteService.ctorParameters = () => [
    { type: HttpClient, },
    { type: WoocommerceHelperService, },
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

export { WoocommerceHelperService, ProductOrder, ProductOrderBy, WoocommerceProductsService, TagOrder, TagOrderBy, WoocommerceTagsService, CategoryOrder, CategoryOrderBy, WoocommerceCategoriesService, NonceMethod, AuthService, WoocommerceOrderService, WoocommerceCouponService, WoocommerceCustomerService, WoocommerceOrderNoteService };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXdvb2FwaS5qcy5tYXAiLCJzb3VyY2VzIjpbIm5nOi8vbmd4LXdvb2FwaS9oZWxwZXIuc2VydmljZS50cyIsIm5nOi8vbmd4LXdvb2FwaS9wcm9kdWN0cy9wcm9kdWN0LmludGVyZmFjZS50cyIsIm5nOi8vbmd4LXdvb2FwaS9wcm9kdWN0cy93b29jb21tZXJjZS1wcm9kdWN0cy5zZXJ2aWNlLnRzIiwibmc6Ly9uZ3gtd29vYXBpL3RhZ3MvcHJvZHVjdC10YWdzLmludGVyZmFjZS50cyIsIm5nOi8vbmd4LXdvb2FwaS90YWdzL3dvb2NvbW1lcmNlLXRhZ3Muc2VydmljZS50cyIsIm5nOi8vbmd4LXdvb2FwaS9jYXRlZ29yaWVzL3Byb2R1Y3QtY2F0ZWdvcmllcy5pbnRlcmZhY2UudHMiLCJuZzovL25neC13b29hcGkvY2F0ZWdvcmllcy93b29jb21tZXJjZS1jYXRlZ29yaWVzLnNlcnZpY2UudHMiLCJuZzovL25neC13b29hcGkvYXV0aC9hdXRoLmludGVyZmFjZS50cyIsIm5nOi8vbmd4LXdvb2FwaS9hdXRoL2F1dGguc2VydmljZS50cyIsIm5nOi8vbmd4LXdvb2FwaS9vcmRlcnMvb3JkZXIuc2VydmljZS50cyIsIm5nOi8vbmd4LXdvb2FwaS9jb3Vwb24vY291cG9uLnNlcnZpY2UudHMiLCJuZzovL25neC13b29hcGkvY3VzdG9tZXIvY3VzdG9tZXIuc2VydmljZS50cyIsIm5nOi8vbmd4LXdvb2FwaS9vcmRlci1ub3Rlcy9vcmRlci1ub3Rlcy5zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEh0dHBFcnJvclJlc3BvbnNlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgIFdvb2NvbW1lcmNlSGVscGVyU2VydmljZSB7XG4gIGNvbnN0cnVjdG9yKCkgeyB9XG5cblxuICBoYW5kbGVFcnJvcihlcnJvcjogSHR0cEVycm9yUmVzcG9uc2UpOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgIGlmIChlcnJvci5lcnJvciBpbnN0YW5jZW9mIEVycm9yRXZlbnQpIHtcbiAgICAgIC8vIEEgY2xpZW50LXNpZGUgb3IgbmV0d29yayBlcnJvciBvY2N1cnJlZC4gSGFuZGxlIGl0IGFjY29yZGluZ2x5LlxuICAgICAgY29uc29sZS5lcnJvcignQW4gZXJyb3Igb2NjdXJyZWQ6JywgZXJyb3IuZXJyb3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUaGUgYmFja2VuZCByZXR1cm5lZCBhbiB1bnN1Y2Nlc3NmdWwgcmVzcG9uc2UgY29kZS5cbiAgICAgIC8vIFRoZSByZXNwb25zZSBib2R5IG1heSBjb250YWluIGNsdWVzIGFzIHRvIHdoYXQgd2VudCB3cm9uZyxcbiAgICAgICAgY29uc29sZS5sb2coJ0JhY2tlbmQgcmVzcG9uc2UnLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBPYnNlcnZhYmxlLnRocm93KGVycm9yLmVycm9yKTtcbiAgICB9XG4gICAgLy8gcmV0dXJuIGFuIG9ic2VydmFibGUgd2l0aCBhIHVzZXItZmFjaW5nIGVycm9yIG1lc3NhZ2VcbiAgICByZXR1cm4gT2JzZXJ2YWJsZS50aHJvdyh7bWVzc2FnZTogJ1NvbWV0aGluZyBiYWQgaGFwcGVuZWQ7IHBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuJ30pO1xuICB9XG5cbiAgaW5jbHVkZVF1ZXJ5KHF1ZXJ5ID0ge30pIHtcbiAgICBjb25zdCBxdWVyeVBhdGNoID0ge307XG4gICAgT2JqZWN0LmtleXMocXVlcnkpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgIHF1ZXJ5UGF0Y2hba2V5XSA9IHF1ZXJ5W2tleV0udG9TdHJpbmcoKTtcbiAgICB9KTtcbiAgICByZXR1cm4gcXVlcnlQYXRjaDtcbiAgfVxuXG4gIGluY2x1ZGVFbmNvZGVkKHF1ZXJ5ID0ge30pIHtcbiAgICBjb25zdCBwYXJhbXMgPSBuZXcgRm9ybURhdGEoKTtcbiAgICBPYmplY3Qua2V5cyhxdWVyeSkuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICBwYXJhbXMuYXBwZW5kKGtleSwgcXVlcnlba2V5XSk7XG4gICAgfSk7XG4gICAgY29uc29sZS5sb2cocGFyYW1zKTtcbiAgICByZXR1cm4gcGFyYW1zO1xuICB9XG5cbiAgaW5jbHVkZVJlc3BvbnNlSGVhZGVyKHJlc3BvbnNlLCByZXNwb25zZUJvZHlLZXk/OiBzdHJpbmcpIHtcbiAgICBjb25zdCBoZWFkZXJzID0ge307XG4gICAgcmVzcG9uc2UuaGVhZGVycy5rZXlzKCkuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgaGVhZGVyc1trZXldID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoa2V5KTtcbiAgICB9KTtcbiAgICBsZXQgcmVzcG9uc2VEYXRhID0ge307XG4gICAgaWYgKHJlc3BvbnNlQm9keUtleSkge1xuICAgICAgcmVzcG9uc2VEYXRhW3Jlc3BvbnNlQm9keUtleV0gPSByZXNwb25zZS5ib2R5O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXNwb25zZURhdGEgPSByZXNwb25zZS5ib2R5O1xuICAgIH1cbiAgICByZXNwb25zZURhdGFbJ2hlYWRlcnMnXSA9IGhlYWRlcnM7XG4gICAgcmV0dXJuIHJlc3BvbnNlRGF0YTtcbiAgfVxufVxuIiwiZXhwb3J0IGludGVyZmFjZSBQcm9kdWN0IHtcbiAgaWQ/OiBudW1iZXI7XG4gIG5hbWU/OiBzdHJpbmc7XG4gIHNsdWc/OiBzdHJpbmc7XG4gIHBlcm1hbGluaz86IHN0cmluZztcbiAgZGF0ZV9jcmVhdGVkPzogRGF0ZTtcbiAgZGF0ZV9jcmVhdGVkX2dtdD86IERhdGU7XG4gIGRhdGVfbW9kaWZpZWQ/OiBEYXRlO1xuICBkYXRlX21vZGlmaWVkX2dtdD86IERhdGU7XG4gIHR5cGU/OiBzdHJpbmc7XG4gIHN0YXR1cz86IHN0cmluZztcbiAgZmVhdHVyZWQ/OiBib29sZWFuO1xuICBjYXRhbG9nX3Zpc2liaWxpdHk/OiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICBzaG9ydF9kZXNjcmlwdGlvbj86IHN0cmluZztcbiAgc2t1Pzogc3RyaW5nO1xuICBwcmljZT86IHN0cmluZztcbiAgcmVndWxhcl9wcmljZT86IHN0cmluZztcbiAgc2FsZV9wcmljZT86IHN0cmluZztcbiAgZGF0ZV9vbl9zYWxlX2Zyb20/OiBEYXRlO1xuICBkYXRlX29uX3NhbGVfZnJvbV9nbXQ/OiBEYXRlO1xuICBkYXRlX29uX3NhbGVfdG8/OiBEYXRlO1xuICBkYXRlX29uX3NhbGVfdG9fZ210PzogRGF0ZTtcbiAgcHJpY2VfaHRtbD86IHN0cmluZztcbiAgb25fc2FsZT86IGJvb2xlYW47XG4gIHB1cmNoYXNhYmxlPzogYm9vbGVhbjtcbiAgdG90YWxfc2FsZXM/OiBudW1iZXI7XG4gIHZpcnR1YWw/OiBib29sZWFuO1xuICBkb3dubG9hZGFibGU/OiBib29sZWFuO1xuICBkb3dubG9hZHM/OiBBcnJheTxhbnk+O1xuICBkb3dubG9hZF9saW1pdD86IG51bWJlcjtcbiAgZG93bmxvYWRfZXhwaXJ5PzogbnVtYmVyO1xuICBleHRlcm5hbF91cmw/OiBzdHJpbmc7XG4gIGJ1dHRvbl90ZXh0Pzogc3RyaW5nO1xuICB0YXhfc3RhdHVzPzogc3RyaW5nO1xuICB0YXhfY2xhc3M/OiBzdHJpbmc7XG4gIG1hbmFnZV9zdG9jaz86IGJvb2xlYW47XG4gIHN0b2NrX3F1YW50aXR5PzogbnVtYmVyO1xuICBpbl9zdG9jaz86IGJvb2xlYW47XG4gIGJhY2tvcmRlcnM/OiBib29sZWFuO1xuICBiYWNrb3JkZXJzX2FsbG93ZWQ/OiBib29sZWFuO1xuICBiYWNrb3JkZXJlZD86IGJvb2xlYW47XG4gIHNvbGRfaW5kaXZpZHVhbGx5PzogYm9vbGVhbjtcbiAgd2VpZ2h0Pzogc3RyaW5nO1xuICBkaW1lbnNpb25zPzogYW55O1xuICBzaGlwcGluZ19yZXF1aXJlZD86IGJvb2xlYW47XG4gIHNoaXBwaW5nX3RheGFibGU/OiBib29sZWFuO1xuICBzaGlwcGluZ19jbGFzcz86IHN0cmluZztcbiAgc2hpcHBpbmdfY2xhc3NfaWQ/OiBudW1iZXI7XG4gIHJldmlld3NfYWxsb3dlZD86IGJvb2xlYW47XG4gIGF2ZXJhZ2VfcmF0aW5nPzogc3RyaW5nO1xuICByYXRpbmdfY291bnQ/OiBudW1iZXI7XG4gIHJlbGF0ZWRfaWRzPzogQXJyYXk8YW55PjtcbiAgdXBzZWxsX2lkcz86IEFycmF5PGFueT47XG4gIGNyb3NzX3NlbGxfaWRzPzogQXJyYXk8YW55PjtcbiAgcGFyZW50X2lkPzogbnVtYmVyO1xuICBwdXJjaGFzZV9ub3RlPzogc3RyaW5nO1xuICBjYXRlZ29yaWVzPzogQXJyYXk8YW55PjtcbiAgdGFncz86IEFycmF5PGFueT47XG4gIGF0dHJpYnV0ZXM/OiBBcnJheTxhbnk+O1xuICBkZWZhdWx0X2F0dHJpYnV0ZXM/OiBBcnJheTxhbnk+O1xuICB2YXJpYXRpb25zPzogQXJyYXk8YW55PjtcbiAgZ3JvdXBlZF9wcm9kdWN0cz86IEFycmF5PHN0cmluZz47XG4gIG1lbnVfb3JkZXI/OiBudW1iZXI7XG4gIG1ldGFfZGF0YT86IEFycmF5PGFueT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmV0cmlldmVQcm9kdWN0c1Jlc3BvbnNlIHtcbiAgcHJvZHVjdHM/OiBQcm9kdWN0W107XG4gIGhlYWRlcnM/OiBBcnJheTxhbnk+O1xufVxuXG5cbmV4cG9ydCBlbnVtIFByb2R1Y3RPcmRlciB7XG4gICdkZXNjJyA9ICdkZXNjJyxcbiAgJ2FzYycgPSAnYXNjJ1xufVxuZXhwb3J0IGVudW0gUHJvZHVjdE9yZGVyQnkge1xuICAnZGF0ZSc9ICdkYXRlJyxcbiAgJ2lkJz0gJ2lkJyxcbiAgJ2luY2x1ZGUnPSAnaW5jbHVkZScsXG4gICd0aXRsZSc9ICd0aXRsZScsXG4gICdzbHVnJz0gJ3NsdWcnXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvZHVjdFF1ZXJ5IHtcbiAgY29udGV4dD86IHN0cmluZztcbiAgcGFnZT86IG51bWJlcjtcbiAgcGVyX3BhZ2U/OiBudW1iZXI7XG4gIHNlYXJjaD86IHN0cmluZztcbiAgYWZ0ZXI/OiBzdHJpbmc7XG4gIGJlZm9yZT86IHN0cmluZztcbiAgZXhjbHVkZT86IEFycmF5PGFueT47XG4gIGluY2x1ZGU/OiBBcnJheTxhbnk+O1xuICBvZmZzZXQ/OiBudW1iZXI7XG4gIG9yZGVyPzogUHJvZHVjdE9yZGVyO1xuICBvcmRlcmJ5PzogUHJvZHVjdE9yZGVyQnk7XG4gIHBhcmVudD86IEFycmF5PHN0cmluZz47XG4gIHBhcmVudF9leGNsdWRlPzogQXJyYXk8c3RyaW5nPjtcbiAgc2x1Zz86IHN0cmluZztcbiAgc3RhdHVzPzogc3RyaW5nO1xuICB0eXBlPzogc3RyaW5nO1xuICBza3U/OiBzdHJpbmc7XG4gIGZlYXR1cmVkPzogYm9vbGVhbjtcbiAgY2F0ZWdvcnk/OiBzdHJpbmc7XG4gIHRhZz86IHN0cmluZztcbiAgc2hpcHBpbmdfY2xhc3M/OiBzdHJpbmc7XG4gIGF0dHJpYnV0ZT86IHN0cmluZztcbiAgYXR0cmlidXRlX3Rlcm0/OiBzdHJpbmc7XG4gIHRheF9jbGFzcz86IHN0cmluZztcbiAgaW5fc3RvY2s/OiBib29sZWFuO1xuICBvbl9zYWxlPzogYm9vbGVhbjtcbiAgbWluX3ByaWNlPzogc3RyaW5nO1xuICBtYXhfcHJpY2U/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvZHVjdFJldmlldyB7XG4gIGlkPzogbnVtYmVyO1xuICByZXZpZXc/OiBzdHJpbmc7XG4gIGRhdGVfY3JlYXRlZD86IERhdGU7XG4gIGRhdGVfY3JlYXRlZF9nbXQ/OiBEYXRlO1xuICByYXRpbmc/OiBudW1iZXI7XG4gIG5hbWU/OiBzdHJpbmc7XG4gIGVtYWlsPzogc3RyaW5nO1xuICB2ZXJpZmllZD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvZHVjdFJldmlld3NSZXNwb25zZSB7XG4gIHByb2R1Y3RfcmV2aWV3cz86IFByb2R1Y3RSZXZpZXdbXTtcbn1cbiIsImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEh0dHBDbGllbnQgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBjYXRjaEVycm9yLCBtYXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5cbmltcG9ydCB7XG4gIFByb2R1Y3QsXG4gIFByb2R1Y3RRdWVyeSxcbiAgUmV0cmlldmVQcm9kdWN0c1Jlc3BvbnNlLFxuICBQcm9kdWN0UmV2aWV3c1Jlc3BvbnNlLFxuICBQcm9kdWN0UmV2aWV3LFxuICAvLyBQcm9kdWN0Q291bnRRdWVyeVxuIH0gZnJvbSAnLi9wcm9kdWN0LmludGVyZmFjZSc7XG5pbXBvcnQgeyBXb29jb21tZXJjZUhlbHBlclNlcnZpY2UgfSBmcm9tICcuLi9oZWxwZXIuc2VydmljZSc7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBXb29jb21tZXJjZVByb2R1Y3RzU2VydmljZSB7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBodHRwQ2xpZW50OiBIdHRwQ2xpZW50LFxuICAgIHByaXZhdGUgd29vSGVscGVyOiBXb29jb21tZXJjZUhlbHBlclNlcnZpY2VcbiAgKSB7IH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgUHJvZHVjdFxuICAgKiBAcGFyYW0gcGF5bG9hZDogUHJvZHVjdFxuICAgKi9cbiAgY3JlYXRlUHJvZHVjdChwYXlsb2FkOiBQcm9kdWN0KTogT2JzZXJ2YWJsZTxQcm9kdWN0PiB7XG4gICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PFByb2R1Y3Q+KGBwcm9kdWN0c2AsIHBheWxvYWQpXG4gICAgICAucGlwZShjYXRjaEVycm9yKGVyciA9PiB0aGlzLndvb0hlbHBlci5oYW5kbGVFcnJvcihlcnIpKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmUgYSBwcm9kdWN0XG4gICAqL1xuICByZXRyaWV2ZVByb2R1Y3QoaWQ6IG51bWJlcik6IE9ic2VydmFibGU8UHJvZHVjdD4ge1xuICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PFByb2R1Y3Q+KGBwcm9kdWN0cy8ke2lkfWApXG4gICAgICAucGlwZShjYXRjaEVycm9yKGVyciA9PiB0aGlzLndvb0hlbHBlci5oYW5kbGVFcnJvcihlcnIpKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmUgbGlzdCBvZiBwcm9kdWN0XG4gICAqL1xuICByZXRyaWV2ZVByb2R1Y3RzKHF1ZXJ5PzogUHJvZHVjdFF1ZXJ5KTogT2JzZXJ2YWJsZTxSZXRyaWV2ZVByb2R1Y3RzUmVzcG9uc2U+IHtcbiAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldChgcHJvZHVjdHNgLCB7cGFyYW1zOiB0aGlzLndvb0hlbHBlci5pbmNsdWRlUXVlcnkocXVlcnkpLCBvYnNlcnZlOiAncmVzcG9uc2UnfSlcbiAgICAgIC5waXBlKFxuICAgICAgICBtYXAodmFsdWUgPT4gdGhpcy53b29IZWxwZXIuaW5jbHVkZVJlc3BvbnNlSGVhZGVyKHZhbHVlLCAncHJvZHVjdHMnKSksXG4gICAgICAgIGNhdGNoRXJyb3IoZXJyID0+IHRoaXMud29vSGVscGVyLmhhbmRsZUVycm9yKGVycikpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgUHJvZHVjdFxuICAgKi9cbiAgdXBkYXRlUHJvZHVjdChpZDogbnVtYmVyLCBwYXlsb2FkOiBQcm9kdWN0KTogT2JzZXJ2YWJsZTxQcm9kdWN0PiB7XG4gICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wdXQ8UHJvZHVjdD4oYHByb2R1Y3RzLyR7aWR9YCwgcGF5bG9hZClcbiAgICAucGlwZShjYXRjaEVycm9yKGVyciA9PiB0aGlzLndvb0hlbHBlci5oYW5kbGVFcnJvcihlcnIpKSk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIFByb2R1Y3RcbiAgICovXG4gIGRlbGV0ZVByb2R1Y3QoaWQ6IG51bWJlcik6IE9ic2VydmFibGU8UHJvZHVjdD4ge1xuICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZGVsZXRlPFByb2R1Y3Q+KGBwcm9kdWN0cy8ke2lkfWApXG4gICAgLnBpcGUoY2F0Y2hFcnJvcihlcnIgPT4gdGhpcy53b29IZWxwZXIuaGFuZGxlRXJyb3IoZXJyKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlIHByb2R1Y3QgcmV2aWV3cyBieSBwcm9kdWN0IGlkXG4gICAqL1xuICByZXRyaWV2ZVByb2R1Y3RSZXZpZXdzKHByb2R1Y3RfaWQ6IHN0cmluZyk6IE9ic2VydmFibGU8UHJvZHVjdFJldmlld3NSZXNwb25zZT4ge1xuICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PFByb2R1Y3RSZXZpZXdzUmVzcG9uc2U+KGBwcm9kdWN0cy8ke3Byb2R1Y3RfaWR9L3Jldmlld3NgKVxuICAgIC5waXBlKGNhdGNoRXJyb3IoZXJyID0+IHRoaXMud29vSGVscGVyLmhhbmRsZUVycm9yKGVycikpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZSBwcm9kdWN0IHJldmlld3MgYnkgcHJvZHVjdCBpZFxuICAgKi9cbiAgcmV0cmlldmVQcm9kdWN0UmV2aWV3KHByb2R1Y3RfaWQ6IG51bWJlciwgcmV2aWV3X2lkOiBudW1iZXIpOiBPYnNlcnZhYmxlPFByb2R1Y3RSZXZpZXc+IHtcbiAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxQcm9kdWN0UmV2aWV3PihgcHJvZHVjdHMvJHtwcm9kdWN0X2lkfS9yZXZpZXdzLyR7cmV2aWV3X2lkfWApXG4gICAgLnBpcGUoY2F0Y2hFcnJvcihlcnIgPT4gdGhpcy53b29IZWxwZXIuaGFuZGxlRXJyb3IoZXJyKSkpO1xuICB9XG59XG4iLCJleHBvcnQgaW50ZXJmYWNlIFByb2R1Y3RUYWcge1xuICBpZD86IG51bWJlcjtcbiAgbmFtZT86IHN0cmluZztcbiAgc2x1Zz86IHN0cmluZztcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gIGNvdW50PzogbnVtYmVyO1xufVxuXG5leHBvcnQgZW51bSBUYWdPcmRlciB7XG4gICdkZXNjJyA9ICdkZXNjJyxcbiAgJ2FzYycgPSAnYXNjJ1xufVxuZXhwb3J0IGVudW0gVGFnT3JkZXJCeSB7XG4gICdpZCc9ICdpZCcsXG4gICdpbmNsdWRlJz0gJ2luY2x1ZGUnLFxuICAnbmFtZSc9ICduYW1lJyxcbiAgJ3NsdWcnPSAnc2x1ZycsXG4gICd0ZXJtX2dyb3VwJyA9ICd0ZXJtX2dyb3VwJyxcbiAgJ2Rlc2NyaXB0aW9uJyA9ICdkZXNjcmlwdGlvbicsXG4gICdjb3VudCcgPSAnY291bnQnXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGFnUXVlcnkge1xuICBjb250ZXh0Pzogc3RyaW5nO1xuICBwYWdlPzogbnVtYmVyO1xuICBwZXJfcGFnZT86IG51bWJlcjtcbiAgc2VhcmNoPzogc3RyaW5nO1xuICBleGNsdWRlPzogQXJyYXk8YW55PjtcbiAgaW5jbHVkZT86IEFycmF5PGFueT47XG4gIG9mZnNldDogbnVtYmVyO1xuICBvcmRlcj86IFRhZ09yZGVyO1xuICBvcmRlcmJ5PzogVGFnT3JkZXJCeTtcbiAgaGlkZV9lbXB0eTogYm9vbGVhbjtcbiAgcHJvZHVjdDogbnVtYmVyO1xuICBzbHVnOiBzdHJpbmc7XG59XG4iLCJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBIdHRwQ2xpZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgY2F0Y2hFcnJvciB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuaW1wb3J0IHtcbiAgUHJvZHVjdFRhZyxcbiAgVGFnUXVlcnlcbiB9IGZyb20gJy4vcHJvZHVjdC10YWdzLmludGVyZmFjZSc7XG5pbXBvcnQgeyBXb29jb21tZXJjZUhlbHBlclNlcnZpY2UgfSBmcm9tICcuLi9oZWxwZXIuc2VydmljZSc7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBXb29jb21tZXJjZVRhZ3NTZXJ2aWNlIHtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGh0dHBDbGllbnQ6IEh0dHBDbGllbnQsXG4gICAgcHJpdmF0ZSB3b29IZWxwZXI6IFdvb2NvbW1lcmNlSGVscGVyU2VydmljZVxuICApIHsgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBUYWdcbiAgICogQHBhcmFtIHBheWxvYWRcbiAgICovXG4gIGNyZWF0ZVRhZyhwYXlsb2FkOiBQcm9kdWN0VGFnKTogT2JzZXJ2YWJsZTxQcm9kdWN0VGFnPiB7XG4gICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PFByb2R1Y3RUYWc+KGB0YWdzYCwgcGF5bG9hZClcbiAgICAgIC5waXBlKGNhdGNoRXJyb3IoZXJyID0+IHRoaXMud29vSGVscGVyLmhhbmRsZUVycm9yKGVycikpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZSBhIHRhZ1xuICAgKi9cbiAgcmV0cmlldmVUYWcoaWQ6IG51bWJlcik6IE9ic2VydmFibGU8UHJvZHVjdFRhZz4ge1xuICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PFByb2R1Y3RUYWc+KGB0YWdzLyR7aWR9YClcbiAgICAgIC5waXBlKGNhdGNoRXJyb3IoZXJyID0+IHRoaXMud29vSGVscGVyLmhhbmRsZUVycm9yKGVycikpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZSBsaXN0IG9mIFRhZ1xuICAgKi9cbiAgcmV0cmlldmVUYWdzKHF1ZXJ5PzogVGFnUXVlcnkpOiBPYnNlcnZhYmxlPFByb2R1Y3RUYWdbXT4ge1xuICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0KGB0YWdzYCxcbiAgICAgIHtcbiAgICAgICAgcGFyYW1zOiB0aGlzLndvb0hlbHBlci5pbmNsdWRlUXVlcnkocXVlcnkpXG4gICAgICB9KVxuICAgICAgLnBpcGUoXG4gICAgICAgIGNhdGNoRXJyb3IoZXJyID0+IHRoaXMud29vSGVscGVyLmhhbmRsZUVycm9yKGVycikpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgVGFnXG4gICAqL1xuICB1cGRhdGVUYWcoaWQ6IG51bWJlciwgcGF5bG9hZDogUHJvZHVjdFRhZyk6IE9ic2VydmFibGU8UHJvZHVjdFRhZz4ge1xuICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucHV0PFByb2R1Y3RUYWc+KGB0YWdzLyR7aWR9YCwgcGF5bG9hZClcbiAgICAucGlwZShjYXRjaEVycm9yKGVyciA9PiB0aGlzLndvb0hlbHBlci5oYW5kbGVFcnJvcihlcnIpKSk7XG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlIFRhZ1xuICAgKi9cbiAgZGVsZXRlYWdUKGlkOiBudW1iZXIpOiBPYnNlcnZhYmxlPFByb2R1Y3RUYWc+IHtcbiAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmRlbGV0ZTxQcm9kdWN0VGFnPihgdGFncy8ke2lkfWApXG4gICAgLnBpcGUoY2F0Y2hFcnJvcihlcnIgPT4gdGhpcy53b29IZWxwZXIuaGFuZGxlRXJyb3IoZXJyKSkpO1xuICB9XG59XG4iLCJleHBvcnQgaW50ZXJmYWNlIFByb2R1Y3RDYXRlZ29yeSB7XG4gIGlkPzogbnVtYmVyO1xuICBuYW1lPzogc3RyaW5nO1xuICBzbHVnPzogc3RyaW5nO1xuICBwYXJlbnQ/OiBudW1iZXI7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICBkaXNwbGF5Pzogc3RyaW5nO1xuICBpbWFnZT86IFByb2R1Y3RDYXRlZ29yeUltYWdlO1xuICBtZW51X29yZGVyPzogbnVtYmVyO1xuICBjb3VudD86IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQcm9kdWN0Q2F0ZWdvcnlJbWFnZSB7XG4gIGlkPzogbnVtYmVyO1xuICBkYXRlX2NyZWF0ZWQ/OiBEYXRlO1xuICBkYXRlX2NyZWF0ZWRfZ210PzogRGF0ZTtcbiAgZGF0ZV9tb2RpZmllZD86IERhdGU7XG4gIGRhdGVfbW9kaWZpZWRfZ210PzogRGF0ZTtcbiAgc3JjPzogc3RyaW5nO1xuICB0aXRsZT86IHN0cmluZztcbiAgYWx0Pzogc3RyaW5nO1xufVxuXG5leHBvcnQgZW51bSBDYXRlZ29yeU9yZGVyIHtcbiAgJ2Rlc2MnID0gJ2Rlc2MnLFxuICAnYXNjJyA9ICdhc2MnXG59XG5leHBvcnQgZW51bSBDYXRlZ29yeU9yZGVyQnkge1xuICAnaWQnPSAnaWQnLFxuICAnaW5jbHVkZSc9ICdpbmNsdWRlJyxcbiAgJ25hbWUnPSAnbmFtZScsXG4gICdzbHVnJz0gJ3NsdWcnLFxuICAndGVybV9ncm91cCcgPSAndGVybV9ncm91cCcsXG4gICdkZXNjcmlwdGlvbicgPSAnZGVzY3JpcHRpb24nLFxuICAnY291bnQnID0gJ2NvdW50J1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhdGVnb3J5UXVlcnkge1xuICBjb250ZXh0Pzogc3RyaW5nO1xuICBwYWdlPzogbnVtYmVyO1xuICBwZXJfcGFnZT86IG51bWJlcjtcbiAgc2VhcmNoPzogc3RyaW5nO1xuICBleGNsdWRlPzogQXJyYXk8YW55PjtcbiAgaW5jbHVkZT86IEFycmF5PGFueT47XG4gIG9yZGVyPzogQ2F0ZWdvcnlPcmRlcjtcbiAgb3JkZXJieT86IENhdGVnb3J5T3JkZXJCeTtcbiAgaGlkZV9lbXB0eT86IGJvb2xlYW47XG4gIHBhcmVudD86IG51bWJlcjtcbiAgcHJvZHVjdD86IG51bWJlcjtcbiAgc2x1Zz86IHN0cmluZztcbn1cbiIsImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEh0dHBDbGllbnQgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBjYXRjaEVycm9yIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG5pbXBvcnQge1xuICBQcm9kdWN0Q2F0ZWdvcnksXG4gIENhdGVnb3J5UXVlcnlcbiB9IGZyb20gJy4vcHJvZHVjdC1jYXRlZ29yaWVzLmludGVyZmFjZSc7XG5pbXBvcnQgeyBXb29jb21tZXJjZUhlbHBlclNlcnZpY2UgfSBmcm9tICcuLi9oZWxwZXIuc2VydmljZSc7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBXb29jb21tZXJjZUNhdGVnb3JpZXNTZXJ2aWNlIHtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGh0dHBDbGllbnQ6IEh0dHBDbGllbnQsXG4gICAgcHJpdmF0ZSB3b29IZWxwZXI6IFdvb2NvbW1lcmNlSGVscGVyU2VydmljZVxuICApIHsgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBDYXRlZ29yeVxuICAgKiBAcGFyYW0gcGF5bG9hZDogUHJvZHVjdFxuICAgKi9cbiAgY3JlYXRlQ2F0ZWdvcnkoY2F0ZWdvcnk6IFByb2R1Y3RDYXRlZ29yeSk6IE9ic2VydmFibGU8UHJvZHVjdENhdGVnb3J5PiB7XG4gICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PFByb2R1Y3RDYXRlZ29yeT4oYHByb2R1Y3RzL2NhdGVnb3JpZXNgLCBjYXRlZ29yeSlcbiAgICAgIC5waXBlKGNhdGNoRXJyb3IoZXJyID0+IHRoaXMud29vSGVscGVyLmhhbmRsZUVycm9yKGVycikpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZSBhIENhdGVnb3J5XG4gICAqL1xuICByZXRyaWV2ZUNhdGVnb3J5KGlkOiBudW1iZXIpOiBPYnNlcnZhYmxlPFByb2R1Y3RDYXRlZ29yeT4ge1xuICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PFByb2R1Y3RDYXRlZ29yeT4oYHByb2R1Y3RzL2NhdGVnb3JpZXMvJHtpZH1gKVxuICAgICAgLnBpcGUoY2F0Y2hFcnJvcihlcnIgPT4gdGhpcy53b29IZWxwZXIuaGFuZGxlRXJyb3IoZXJyKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlIGxpc3Qgb2YgQ2F0ZWdvcnlcbiAgICovXG4gIHJldHJpZXZlQ2F0ZWdvcmllcyhxdWVyeT86IENhdGVnb3J5UXVlcnkpOiBPYnNlcnZhYmxlPENhdGVnb3J5UXVlcnlbXT4ge1xuICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0KGBwcm9kdWN0cy9jYXRlZ29yaWVzYCxcbiAgICAgIHtcbiAgICAgICAgcGFyYW1zOiB0aGlzLndvb0hlbHBlci5pbmNsdWRlUXVlcnkocXVlcnkpXG4gICAgICB9KVxuICAgICAgLnBpcGUoXG4gICAgICAgIGNhdGNoRXJyb3IoZXJyID0+IHRoaXMud29vSGVscGVyLmhhbmRsZUVycm9yKGVycikpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgQ2F0ZWdvcnlcbiAgICovXG4gIHVwZGF0ZUNhdGVnb3J5KGlkOiBudW1iZXIsIHBheWxvYWQ6IFByb2R1Y3RDYXRlZ29yeSk6IE9ic2VydmFibGU8UHJvZHVjdENhdGVnb3J5PiB7XG4gICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wdXQ8UHJvZHVjdENhdGVnb3J5PihgcHJvZHVjdHMvY2F0ZWdvcmllcy8ke2lkfWAsIHBheWxvYWQpXG4gICAgLnBpcGUoY2F0Y2hFcnJvcihlcnIgPT4gdGhpcy53b29IZWxwZXIuaGFuZGxlRXJyb3IoZXJyKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZSBDYXRlZ29yeVxuICAgKi9cbiAgZGVsZXRlQ2F0ZWdvcnkoaWQ6IG51bWJlcik6IE9ic2VydmFibGU8UHJvZHVjdENhdGVnb3J5PiB7XG4gICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5kZWxldGU8UHJvZHVjdENhdGVnb3J5PihgcHJvZHVjdHMvY2F0ZWdvcmllcy8ke2lkfWApXG4gICAgLnBpcGUoY2F0Y2hFcnJvcihlcnIgPT4gdGhpcy53b29IZWxwZXIuaGFuZGxlRXJyb3IoZXJyKSkpO1xuICB9XG59XG4iLCJleHBvcnQgZW51bSBOb25jZU1ldGhvZCB7XG4gIHJlZ2lzdGVyID0gJ3JlZ2lzdGVyJyxcbiAgZ2V0X2F2YXRhciA9ICdnZXRfYXZhdGFyJyxcbiAgZ2V0X3VzZXJpbmZvID0gJ2dldF91c2VyaW5mbycsXG4gIHJldHJpZXZlX3Bhc3N3b3JkID0gJ3JldHJpZXZlX3Bhc3N3b3JkJyxcbiAgdmFsaWRhdGVfYXV0aF9jb29raWUgPSAndmFsaWRhdGVfYXV0aF9jb29raWUnLFxuICBnZW5lcmF0ZV9hdXRoX2Nvb2tpZSA9ICdnZW5lcmF0ZV9hdXRoX2Nvb2tpZScsXG4gIGdldF9jdXJyZW50dXNlcmluZm8gPSAnZ2V0X2N1cnJlbnR1c2VyaW5mbycsXG4gIGdldF91c2VyX21ldGEgPSAnZ2V0X3VzZXJfbWV0YScsXG4gIHVwZGF0ZV91c2VyX21ldGEgPSAndXBkYXRlX3VzZXJfbWV0YScsXG4gIGRlbGV0ZV91c2VyX21ldGEgPSAnZGVsZXRlX3VzZXJfbWV0YScsXG4gIHhwcm9maWxlID0gJ3hwcm9maWxlJyxcbiAgeHByb2ZpbGVfdXBkYXRlID0gJ3hwcm9maWxlX3VwZGF0ZScsXG4gIGZiX2Nvbm5lY3QgPSAnZmJfY29ubmVjdCdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVOb25jZSB7XG4gIGNvbnRyb2xsZXI6IHN0cmluZztcbiAgbWV0aG9kOiBzdHJpbmc7IC8vIE5vbmNlTWV0aG9kXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ3JlYXRlTm9uY2VSZXMge1xuICBzdGF0dXM6IHN0cmluZztcbiAgY29udHJvbGxlcjogc3RyaW5nO1xuICBtZXRob2Q6IE5vbmNlTWV0aG9kO1xuICBub25jZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlZ2lzdGVyUGF5bG9hZCB7XG4gIHVzZXJuYW1lOiBzdHJpbmc7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIHVzZXJfcGFzcz86IHN0cmluZztcbiAgbm9uY2U6IHN0cmluZztcbiAgZGlzcGxheV9uYW1lOiBzdHJpbmc7XG4gIG5vdGlmeTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlZ2lzdGVyUnNwb25zZSB7XG4gIGNvb2tpZTogc3RyaW5nO1xuICBzdGF0dXM6IHN0cmluZztcbiAgdXNlcl9pZDogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIExvZ2luUGF5bG9hZCB7XG4gIHVzZXJuYW1lOiBzdHJpbmc7XG4gIHBhc3N3b3JkOiBzdHJpbmc7XG59XG4iLCJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBIdHRwQ2xpZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgY2F0Y2hFcnJvciB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuaW1wb3J0IHsgV29vY29tbWVyY2VIZWxwZXJTZXJ2aWNlIH0gZnJvbSAnLi4vaGVscGVyLnNlcnZpY2UnO1xuaW1wb3J0IHsgQ3JlYXRlTm9uY2UsIENyZWF0ZU5vbmNlUmVzLCBSZWdpc3RlclBheWxvYWQsIExvZ2luUGF5bG9hZCB9IGZyb20gJy4vYXV0aC5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuXG4vLyBQbHVnaW5zIHVzZWQgaHR0cHM6Ly93b3JkcHJlc3Mub3JnL3BsdWdpbnMvanNvbi1hcGktdXNlci9cblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIEF1dGhTZXJ2aWNlIHtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGh0dHBDbGllbnQ6IEh0dHBDbGllbnQsXG4gICAgcHJpdmF0ZSB3b29IZWxwZXI6IFdvb2NvbW1lcmNlSGVscGVyU2VydmljZVxuICApIHsgfVxuXG4gIGNyZWF0ZU5vbmNlKHBheWxvYWQ6IENyZWF0ZU5vbmNlKTogT2JzZXJ2YWJsZTxDcmVhdGVOb25jZVJlcz4ge1xuICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0KGBhcGkvZ2V0X25vbmNlL2AsIHtwYXJhbXM6IHRoaXMud29vSGVscGVyLmluY2x1ZGVRdWVyeShwYXlsb2FkKX0pXG4gICAgICAucGlwZShjYXRjaEVycm9yKGVyciA9PiB0aGlzLndvb0hlbHBlci5oYW5kbGVFcnJvcihlcnIpKSk7XG4gIH1cblxuICByZWdpc3RlcihyZWdpc3RlckRhdGE6IFJlZ2lzdGVyUGF5bG9hZCkge1xuICAgIGNvbnN0IHBheWxvYWQgPSB0aGlzLndvb0hlbHBlci5pbmNsdWRlRW5jb2RlZChyZWdpc3RlckRhdGEpO1xuICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucG9zdChgYXBpL3VzZXIvcmVnaXN0ZXIvYCwgcGF5bG9hZClcbiAgICAgIC5waXBlKGNhdGNoRXJyb3IoZXJyID0+IHRoaXMud29vSGVscGVyLmhhbmRsZUVycm9yKGVycikpKTtcbiAgfVxuXG4gIHJldHJpdmVQYXNzd29yZCh1c2VybmFtZTogc3RyaW5nKSB7XG4gICAgY29uc3QgcGF5bG9hZCA9IHRoaXMud29vSGVscGVyLmluY2x1ZGVFbmNvZGVkKHt1c2VyX2xvZ2luOiB1c2VybmFtZX0pO1xuICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucG9zdChgYXBpL3VzZXIvcmV0cmlldmVfcGFzc3dvcmQvYCwgcGF5bG9hZClcbiAgICAgIC5waXBlKGNhdGNoRXJyb3IoZXJyID0+IHRoaXMud29vSGVscGVyLmhhbmRsZUVycm9yKGVycikpKTtcbiAgfVxuXG4gIGdldEF1dGhUb2tlbihwYXlsb2FkOiBMb2dpblBheWxvYWQpIHtcbiAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3QoYHdwLWpzb24vand0LWF1dGgvdjEvdG9rZW5gLCBwYXlsb2FkKVxuICAgIC5waXBlKGNhdGNoRXJyb3IoZXJyID0+IHRoaXMud29vSGVscGVyLmhhbmRsZUVycm9yKGVycikpKTtcbiAgfVxuXG4gIGdlbmVyYXRlQXV0aENvb2tpZShkYXRhOiBMb2dpblBheWxvYWQpIHtcbiAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3QoYGFwaS91c2VyL2dlbmVyYXRlX2F1dGhfY29va2llL2AsIHRoaXMud29vSGVscGVyLmluY2x1ZGVFbmNvZGVkKGRhdGEpKVxuICAgICAgLnBpcGUoY2F0Y2hFcnJvcihlcnIgPT4gdGhpcy53b29IZWxwZXIuaGFuZGxlRXJyb3IoZXJyKSkpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBIdHRwQ2xpZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgY2F0Y2hFcnJvciB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuaW1wb3J0IHsgV29vY29tbWVyY2VIZWxwZXJTZXJ2aWNlIH0gZnJvbSAnLi4vaGVscGVyLnNlcnZpY2UnO1xuaW1wb3J0IHsgT3JkZXIgfSBmcm9tICcuL29yZGVycy5pbnRlcmZhY2UnO1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgV29vY29tbWVyY2VPcmRlclNlcnZpY2Uge1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgaHR0cENsaWVudDogSHR0cENsaWVudCxcbiAgICBwcml2YXRlIHdvb0hlbHBlcjogV29vY29tbWVyY2VIZWxwZXJTZXJ2aWNlXG4gICkgeyB9XG5cbiAgY3JlYXRlT3JkZXIob3JkZXI6IE9yZGVyKTogT2JzZXJ2YWJsZTxPcmRlcj4ge1xuICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucG9zdDxPcmRlcj4oYG9yZGVyc2AsIG9yZGVyKVxuICAgICAgLnBpcGUoY2F0Y2hFcnJvcihlcnIgPT4gdGhpcy53b29IZWxwZXIuaGFuZGxlRXJyb3IoZXJyKSkpO1xuICB9XG5cbiAgcmV0cml2ZU9yZGVyKGlkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPE9yZGVyPiB7XG4gICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8T3JkZXI+KGBvcmRlcnMvJHtpZH1gKVxuICAgICAgLnBpcGUoY2F0Y2hFcnJvcihlcnIgPT4gdGhpcy53b29IZWxwZXIuaGFuZGxlRXJyb3IoZXJyKSkpO1xuICB9XG5cbiAgbGlzdEFsbE9yZGVyKCk6IE9ic2VydmFibGU8T3JkZXJbXT4gIHtcbiAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxPcmRlcltdPihgb3JkZXJzYClcbiAgICAgIC5waXBlKGNhdGNoRXJyb3IoZXJyID0+IHRoaXMud29vSGVscGVyLmhhbmRsZUVycm9yKGVycikpKTtcbiAgfVxuXG4gIHVwZGF0ZU9yZGVyKG9yZGVyOiBPcmRlcik6IE9ic2VydmFibGU8T3JkZXI+ICB7XG4gICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wdXQ8T3JkZXI+KGBvcmRlcnMvJHtvcmRlci5pZH1gLCBvcmRlcilcbiAgICAgIC5waXBlKGNhdGNoRXJyb3IoZXJyID0+IHRoaXMud29vSGVscGVyLmhhbmRsZUVycm9yKGVycikpKTtcbiAgfVxuXG4gIGRlbGV0ZU9yZGVyKGlkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPE9yZGVyPiAge1xuICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZGVsZXRlPE9yZGVyPihgb3JkZXJzLyR7aWR9YClcbiAgICAgIC5waXBlKGNhdGNoRXJyb3IoZXJyID0+IHRoaXMud29vSGVscGVyLmhhbmRsZUVycm9yKGVycikpKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSHR0cENsaWVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IGNhdGNoRXJyb3IgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5cbmltcG9ydCB7IFdvb2NvbW1lcmNlSGVscGVyU2VydmljZSB9IGZyb20gJy4uL2hlbHBlci5zZXJ2aWNlJztcbmltcG9ydCB7IENvdXBvbiB9IGZyb20gJy4vY291cG9uLmludGVyZmFjZSc7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBXb29jb21tZXJjZUNvdXBvblNlcnZpY2Uge1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgaHR0cENsaWVudDogSHR0cENsaWVudCxcbiAgICBwcml2YXRlIHdvb0hlbHBlcjogV29vY29tbWVyY2VIZWxwZXJTZXJ2aWNlXG4gICkgeyB9XG5cbiAgXG4gIGNyZWF0ZUNvdXBvbihjb3Vwb246IENvdXBvbik6IE9ic2VydmFibGU8Q291cG9uPiB7XG4gICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PENvdXBvbj4oYGNvdXBvbnNgLCBjb3Vwb24pXG4gICAgICAucGlwZShjYXRjaEVycm9yKGVyciA9PiB0aGlzLndvb0hlbHBlci5oYW5kbGVFcnJvcihlcnIpKSk7XG4gIH1cblxuICByZXRyaXZlQ291cG9uKGlkOiBudW1iZXIpOiBPYnNlcnZhYmxlPENvdXBvbj4ge1xuICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PENvdXBvbj4oYGNvdXBvbnMvJHtpZH1gKVxuICAgICAgLnBpcGUoY2F0Y2hFcnJvcihlcnIgPT4gdGhpcy53b29IZWxwZXIuaGFuZGxlRXJyb3IoZXJyKSkpO1xuICB9XG5cbiAgcmV0cml2ZUNvdXBvbnMoKTogT2JzZXJ2YWJsZTxDb3Vwb24+IHtcbiAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxDb3Vwb24+KGBjb3Vwb25zYClcbiAgICAgIC5waXBlKGNhdGNoRXJyb3IoZXJyID0+IHRoaXMud29vSGVscGVyLmhhbmRsZUVycm9yKGVycikpKTtcbiAgfVxuXG4gIHVwZGF0ZUNvdXBvbihjb3Vwb246IENvdXBvbiwgaWQ6IG51bWJlcik6IE9ic2VydmFibGU8Q291cG9uPiB7XG4gICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PENvdXBvbj4oYGNvdXBvbnMvJHtpZH1gLCBjb3Vwb24pXG4gICAgICAucGlwZShjYXRjaEVycm9yKGVyciA9PiB0aGlzLndvb0hlbHBlci5oYW5kbGVFcnJvcihlcnIpKSk7XG4gIH1cblxuICBkZWxldGVDb3Vwb24oaWQ6IG51bWJlcik6IE9ic2VydmFibGU8Q291cG9uPiB7XG4gICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5kZWxldGU8Q291cG9uPihgY291cG9ucy8ke2lkfT9mb3JjZT10cnVlYClcbiAgICAgIC5waXBlKGNhdGNoRXJyb3IoZXJyID0+IHRoaXMud29vSGVscGVyLmhhbmRsZUVycm9yKGVycikpKTtcbiAgfVxuXG59XG4iLCJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBIdHRwQ2xpZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgY2F0Y2hFcnJvciB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuaW1wb3J0IHsgV29vY29tbWVyY2VIZWxwZXJTZXJ2aWNlIH0gZnJvbSAnLi4vaGVscGVyLnNlcnZpY2UnO1xuaW1wb3J0IHsgQ3VzdG9tZXIgfSBmcm9tICcuL2N1c3RvbWVyLmludGVyZmFjZSc7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBXb29jb21tZXJjZUN1c3RvbWVyU2VydmljZSB7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBodHRwQ2xpZW50OiBIdHRwQ2xpZW50LFxuICAgIHByaXZhdGUgd29vSGVscGVyOiBXb29jb21tZXJjZUhlbHBlclNlcnZpY2VcbiAgKSB7IH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgY3VzdG9tZXJcbiAgICogQHBhcmFtIGN1c3RvbWVyOiBDdXN0b21lclxuICAgKi9cbiAgY3JlYXRlQ3VzdG9tZXJzKGN1c3RvbWVyOiBDdXN0b21lcik6IE9ic2VydmFibGU8Q3VzdG9tZXI+IHtcbiAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3Q8Q3VzdG9tZXI+KGBjdXN0b21lcnNgLCBjdXN0b21lcilcbiAgICAgIC5waXBlKGNhdGNoRXJyb3IoZXJyID0+IHRoaXMud29vSGVscGVyLmhhbmRsZUVycm9yKGVycikpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaXZlIGEgY3VzdG9tZXJcbiAgICogQHBhcmFtIGN1c3RvbWVyOiBDdXN0b21lclxuICAgKi9cbiAgcmV0cml2ZUN1c3RvbWVycyhpZDogbnVtYmVyKTogT2JzZXJ2YWJsZTxDdXN0b21lcj4ge1xuICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEN1c3RvbWVyPihgY3VzdG9tZXJzLyR7aWR9YClcbiAgICAgIC5waXBlKGNhdGNoRXJyb3IoZXJyID0+IHRoaXMud29vSGVscGVyLmhhbmRsZUVycm9yKGVycikpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgYSBjdXN0b21lclxuICAgKiBAcGFyYW0gY3VzdG9tZXI6IEN1c3RvbWVyXG4gICAqL1xuICB1cGRhdGVDdXN0b21lcnMoaWQ6IG51bWJlciwgY3VzdG9tZXI6IEN1c3RvbWVyKTogT2JzZXJ2YWJsZTxDdXN0b21lcj4ge1xuICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucHV0PEN1c3RvbWVyPihgY3VzdG9tZXJzLyR7aWR9YCwgY3VzdG9tZXIpXG4gICAgICAucGlwZShjYXRjaEVycm9yKGVyciA9PiB0aGlzLndvb0hlbHBlci5oYW5kbGVFcnJvcihlcnIpKSk7XG4gIH1cbn1cbiIsImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEh0dHBDbGllbnQgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBjYXRjaEVycm9yIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG5pbXBvcnQgeyBXb29jb21tZXJjZUhlbHBlclNlcnZpY2UgfSBmcm9tICcuLi9oZWxwZXIuc2VydmljZSc7XG5pbXBvcnQgeyBPcmRlck5vdGUsIE9yZGVyTm90ZVJlcyB9IGZyb20gJy4vb3JkZXItbm90ZXMuaW50ZXJmYWNlJztcblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIFdvb2NvbW1lcmNlT3JkZXJOb3RlU2VydmljZSB7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBodHRwQ2xpZW50OiBIdHRwQ2xpZW50LFxuICAgIHByaXZhdGUgd29vSGVscGVyOiBXb29jb21tZXJjZUhlbHBlclNlcnZpY2VcbiAgKSB7IH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgb3JkZXIgbm90ZVxuICAgKiBVUkw6IGh0dHBzOi8vd29vY29tbWVyY2UuZ2l0aHViLmlvL3dvb2NvbW1lcmNlLXJlc3QtYXBpLWRvY3MvI2NyZWF0ZS1hbi1vcmRlci1ub3RlXG4gICAqL1xuICBjcmVhdGVOb3RlKGlkOiBudW1iZXIsIG5vdGU6IE9yZGVyTm90ZSk6IE9ic2VydmFibGU8T3JkZXJOb3RlUmVzPiB7XG4gICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PE9yZGVyTm90ZVJlcz4oYG9yZGVycy8ke2lkfS9ub3Rlc2AsIG5vdGUpXG4gICAgICAucGlwZShjYXRjaEVycm9yKGVyciA9PiB0aGlzLndvb0hlbHBlci5oYW5kbGVFcnJvcihlcnIpKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0cml2ZSBhIG9yZGVyIG5vdGVcbiAgICogVVJMOiBodHRwczovL3dvb2NvbW1lcmNlLmdpdGh1Yi5pby93b29jb21tZXJjZS1yZXN0LWFwaS1kb2NzLyNyZXRyaWV2ZS1hbi1vcmRlci1ub3RlXG4gICAqL1xuICByZXRyaXZlTm90ZShpZDogbnVtYmVyLCBub3RlaWQ6IG51bWJlciApOiBPYnNlcnZhYmxlPE9yZGVyTm90ZVJlcz4ge1xuICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PE9yZGVyTm90ZVJlcz4oYG9yZGVycy8ke2lkfS9ub3Rlcy8ke25vdGVpZH1gKVxuICAgICAgLnBpcGUoY2F0Y2hFcnJvcihlcnIgPT4gdGhpcy53b29IZWxwZXIuaGFuZGxlRXJyb3IoZXJyKSkpO1xuICB9XG5cblxuICAgLyoqXG4gICAqIExpc3QgYWxsIG9yZGVyIG5vdGVzXG4gICAqIFVSTDogaHR0cHM6Ly93b29jb21tZXJjZS5naXRodWIuaW8vd29vY29tbWVyY2UtcmVzdC1hcGktZG9jcy8jbGlzdC1hbGwtb3JkZXItbm90ZXNcbiAgICovXG4gIHJldHJpdmVOb3RlcyhpZDogbnVtYmVyICk6IE9ic2VydmFibGU8T3JkZXJOb3RlUmVzPiB7XG4gICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8T3JkZXJOb3RlUmVzPihgb3JkZXJzLyR7aWR9L25vdGVzL2ApXG4gICAgICAucGlwZShjYXRjaEVycm9yKGVyciA9PiB0aGlzLndvb0hlbHBlci5oYW5kbGVFcnJvcihlcnIpKSk7XG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlIGEgb3JkZXIgbm90ZVxuICAgKiBVUkw6IGh0dHBzOi8vd29vY29tbWVyY2UuZ2l0aHViLmlvL3dvb2NvbW1lcmNlLXJlc3QtYXBpLWRvY3MvI2RlbGV0ZS1hbi1vcmRlci1ub3RlXG4gICAqL1xuICBkZWxldGVOb3RlKGlkOiBudW1iZXIsIG5vdGVpZDogbnVtYmVyICk6IE9ic2VydmFibGU8T3JkZXJOb3RlUmVzPiB7XG4gICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5kZWxldGU8T3JkZXJOb3RlUmVzPihgb3JkZXJzLyR7aWR9L25vdGVzLyR7bm90ZWlkfWApXG4gICAgICAucGlwZShjYXRjaEVycm9yKGVyciA9PiB0aGlzLndvb0hlbHBlci5oYW5kbGVFcnJvcihlcnIpKSk7XG4gIH1cblxufVxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBO0lBTUUsaUJBQWlCOzs7OztJQUdqQixXQUFXLENBQUMsS0FBd0I7UUFDbEMsSUFBSSxLQUFLLENBQUMsS0FBSyxZQUFZLFVBQVUsRUFBRTs7WUFFckMsT0FBTyxDQUFDLEtBQUssQ0FBQyxvQkFBb0IsRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDbEQ7YUFBTTs7O1lBR0gsT0FBTyxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUN2QyxPQUFPLFVBQVUsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO1NBQ3hDOztRQUVELE9BQU8sVUFBVSxDQUFDLEtBQUssQ0FBQyxFQUFDLE9BQU8sRUFBRSxpREFBaUQsRUFBQyxDQUFDLENBQUM7S0FDdkY7Ozs7O0lBRUQsWUFBWSxDQUFDLEtBQUssR0FBRyxFQUFFO1FBQ3JCLHVCQUFN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